---
targets:
  Student:    
    type: application
    platform: iOS
    transitivelyLinkDependencies: false
    settings:
      APPLICATION_EXTENSION_API_ONLY: false
      SWIFT_EMIT_LOC_STRINGS: true
      base:
        PRODUCT_BUNDLE_IDENTIFIER: com.instructure.icanvas.2u
        INFOPLIST_FILE: Student/Info.plist
        CODE_SIGN_ENTITLEMENTS: Student/Student.entitlements
        TARGETED_DEVICE_FAMILY: 1,2
    sources:
      - path: ./
        excludes:
          - ".swiftlint.yml"
    dependencies:
      - package: PSPDFKit
      - package: Heap
      - package: AWSSDK
        product: AWSCore
      - package: AWSSDK
        product: AWSLambda
      - package: AWSSDK
        product: AWSSNS
      - package: BugfenderLibrary
      - package: Intercom
      - target: CanvasCore/CanvasCore
      - target: Core/Core
      - target: SubmitAssignment
      - target: Widgets
    preBuildScripts:
      - path: ../../scripts/swiftLint.sh
        name: SwiftLint
        basedOnDependencyAnalysis: false
      - path: ../../scripts/startPackager.sh
        name: Start Packager
        basedOnDependencyAnalysis: false
      - path: ../../scripts/build-rn-code-images.sh
        name: Build React Native Code and Images
        basedOnDependencyAnalysis: false
      - path: ../../scripts/build-check-keys.sh
        name: Check Required Secret Keys
        basedOnDependencyAnalysis: false
schemes:
  Student:
    build:
      targets:
        Student: all
    test:
      targets: [Core/CoreTests, Core/CoreTester, StudentUnitTests]
